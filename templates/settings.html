{% extends "base.html" %}

{% block title %}Appearance Settings - Token Quest{% endblock %}

{% block content %}
<div class="setup-container fade-in">
    <h1 class="setup-title">ðŸŽ¨ Customize Appearance</h1>
    <p style="color: var(--text-secondary); margin-bottom: 2rem; font-size: 1.1rem;">
        Choose your favorite theme to personalize your gaming experience
    </p>
    
    <!-- Theme Picker -->
    <div class="theme-section">
        <h3 style="text-align: center; margin-bottom: 1rem; color: var(--text-primary);">Choose Your Theme</h3>
        <div class="theme-picker">
            <div class="theme-btn ocean active" data-theme="ocean">
                <div class="theme-name">Ocean Vibes</div>
            </div>
            <div class="theme-btn desert" data-theme="desert">
                <div class="theme-name">Desert Oasis</div>
            </div>
            <div class="theme-btn lava" data-theme="lava">
                <div class="theme-name">Lava Flow</div>
            </div>
            <div class="theme-btn light" data-theme="light">
                <div class="theme-name">Light Mode</div>
            </div>
            <div class="theme-btn dark" data-theme="dark">
                <div class="theme-name">Dark Mode</div>
            </div>
            <div class="theme-btn electric" data-theme="electric">
                <div class="theme-name">Electric Neon</div>
            </div>
            <div class="theme-btn royal" data-theme="royal">
                <div class="theme-name">Royal Purple</div>
            </div>
        </div>
    </div>
    
    <!-- Preview Section -->
    <div style="background: var(--surface); border-radius: 20px; padding: 2rem; margin: 2rem 0; text-align: center;">
        <h4 style="margin-bottom: 1rem; color: var(--text-primary);">Preview</h4>
        <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
            <button class="btn btn-primary">Primary Button</button>
            <button class="btn btn-secondary">Secondary</button>
            <button class="btn btn-success">Success</button>
            <button class="btn btn-warning">Warning</button>
        </div>
    </div>
    
    <!-- Sound Controls -->
    <div class="sound-controls" style="margin-top: 2rem; padding: 2rem; background: var(--surface-glass); border-radius: 20px;">
        <h3 style="text-align: center; margin-bottom: 1rem; color: var(--text-primary);">ðŸ”Š Sound Settings</h3>
        <div style="display: grid; gap: 1rem;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <label style="color: var(--text-primary); font-weight: 500;">Sound Effects</label>
                <button id="toggle-sound" class="btn btn-success" style="padding: 0.5rem 1rem;">
                    ðŸ”Š ON
                </button>
            </div>

            <div style="display: flex; justify-content: space-between; align-items: center;">
                <label style="color: var(--text-primary); font-weight: 500;">Volume</label>
                <input type="range" id="volume-slider" min="0" max="1" step="0.1" value="0.7" 
                       style="width: 150px; accent-color: var(--primary-start);">
            </div>
            <button id="test-sounds" class="btn btn-primary" style="margin-top: 1rem;">
                ðŸŽµ Test Sounds
            </button>
        </div>
    </div>

    <!-- Action Buttons -->
    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-top: 2rem;">
        <a href="{{ url_for('home') }}" class="btn btn-primary btn-large">
            <span class="material-icons">home</span>
            Back to Home
        </a>
        <button id="reset-themes" class="btn btn-secondary">
            <span class="material-icons">refresh</span>
            Reset to Default
        </button>
    </div>
</div>

<style>
.form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.form-group label {
    font-weight: 500;
    color: var(--on-surface);
}

.form-select {
    padding: 0.75rem;
    border: 2px solid var(--outline);
    border-radius: 8px;
    font-size: 1rem;
    background: var(--surface);
    color: var(--on-surface);
}

.form-select:focus {
    outline: none;
    border-color: var(--primary);
}

.form-group small {
    color: var(--on-surface-variant);
    font-size: 0.875rem;
}
</style>

<script>
// Theme switching functionality
document.addEventListener('DOMContentLoaded', function() {
    const themeButtons = document.querySelectorAll('.theme-btn');
    const body = document.body;
    
    // Load saved theme
    const savedTheme = localStorage.getItem('selected-theme') || 'ocean';
    setTheme(savedTheme);
    
    // Theme button click handlers
    themeButtons.forEach(btn => {
        btn.addEventListener('click', function() {
            const theme = this.dataset.theme;
            setTheme(theme);
            localStorage.setItem('selected-theme', theme);
        });
    });
    
    // Reset themes button
    document.getElementById('reset-themes').addEventListener('click', function() {
        setTheme('ocean');
        localStorage.setItem('selected-theme', 'ocean');
    });
    
    // Sound control functionality
    setupSoundControls();
    
    function setTheme(themeName) {
        // Remove active class from all buttons
        themeButtons.forEach(btn => btn.classList.remove('active'));
        
        // Add active class to selected button
        const selectedBtn = document.querySelector(`[data-theme="${themeName}"]`);
        if (selectedBtn) {
            selectedBtn.classList.add('active');
        }
        
        // Apply theme to body
        body.setAttribute('data-theme', themeName);
        
        // Update CSS custom properties for immediate effect
        updateThemeProperties(themeName);
    }
    
    function updateThemeProperties(theme) {
        const root = document.documentElement;
        
        switch(theme) {
            case 'desert':
                root.style.setProperty('--primary-start', '#ff9a56');
                root.style.setProperty('--primary-end', '#ffad56');
                root.style.setProperty('--background', 'linear-gradient(135deg, #ff9a56 0%, #ffad56 50%, #ffeaa7 100%)');
                root.style.setProperty('--text-primary', '#2d3436');
                root.style.setProperty('--text-light', '#ffffff');
                break;
            case 'lava':
                root.style.setProperty('--primary-start', '#ff3838');
                root.style.setProperty('--primary-end', '#ff2d92');
                root.style.setProperty('--background', 'linear-gradient(135deg, #ff3838 0%, #ff6b35 100%)');
                root.style.setProperty('--text-primary', '#ffffff');
                root.style.setProperty('--text-light', '#ffffff');
                break;
            case 'light':
                root.style.setProperty('--primary-start', '#4285f4');
                root.style.setProperty('--primary-end', '#34a853');
                root.style.setProperty('--background', 'linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)');
                root.style.setProperty('--surface', '#ffffff');
                root.style.setProperty('--text-primary', '#212529');
                root.style.setProperty('--text-secondary', '#6c757d');
                root.style.setProperty('--text-light', '#ffffff');
                break;
            case 'dark':
                root.style.setProperty('--primary-start', '#bb86fc');
                root.style.setProperty('--primary-end', '#6200ea');
                root.style.setProperty('--background', 'linear-gradient(135deg, #121212 0%, #1e1e1e 100%)');
                root.style.setProperty('--surface', '#1e1e1e');
                root.style.setProperty('--text-primary', '#ffffff');
                root.style.setProperty('--text-secondary', '#b3b3b3');
                root.style.setProperty('--text-light', '#ffffff');
                break;
            case 'electric':
                root.style.setProperty('--primary-start', '#00ff88');
                root.style.setProperty('--primary-end', '#00b4d8');
                root.style.setProperty('--secondary-start', '#ff006e');
                root.style.setProperty('--secondary-end', '#8338ec');
                root.style.setProperty('--background', 'linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%)');
                root.style.setProperty('--surface', 'rgba(255, 255, 255, 0.05)');
                root.style.setProperty('--surface-glass', 'rgba(0, 255, 136, 0.1)');
                root.style.setProperty('--text-primary', '#00ff88');
                root.style.setProperty('--text-secondary', '#8bf5da');
                root.style.setProperty('--text-light', '#ffffff');
                root.style.setProperty('--shadow', '0 0 20px rgba(0, 255, 136, 0.3)');
                root.style.setProperty('--shadow-hover', '0 0 40px rgba(0, 255, 136, 0.5)');
                break;
            case 'royal':
                root.style.setProperty('--primary-start', '#9d4edd');
                root.style.setProperty('--primary-end', '#7209b7');
                root.style.setProperty('--background', 'linear-gradient(135deg, #240046 0%, #3c096c 50%, #5a189a 100%)');
                root.style.setProperty('--surface', 'rgba(157, 78, 221, 0.1)');
                root.style.setProperty('--text-primary', '#ffffff');
                root.style.setProperty('--text-secondary', '#c77dff');
                root.style.setProperty('--text-light', '#ffffff');
                break;
            default: // ocean
                root.style.setProperty('--primary-start', '#00b4db');
                root.style.setProperty('--primary-end', '#0083b0');
                root.style.setProperty('--background', 'linear-gradient(135deg, #00b4db 0%, #0083b0 100%)');
                root.style.setProperty('--surface', 'rgba(255, 255, 255, 0.95)');
                root.style.setProperty('--text-primary', '#2d3748');
                root.style.setProperty('--text-secondary', '#4a5568');
                root.style.setProperty('--text-light', '#ffffff');
                break;
        }
    }
    
    function setupSoundControls() {
        const toggleSoundBtn = document.getElementById('toggle-sound');
        const volumeSlider = document.getElementById('volume-slider');
        const testSoundsBtn = document.getElementById('test-sounds');
        
        // Initialize button states from current values
        let soundEnabled = localStorage.getItem('soundEnabled') !== 'false';
        let volume = parseFloat(localStorage.getItem('soundVolume')) || 0.7;
        
        function updateSoundButton() {
            toggleSoundBtn.textContent = soundEnabled ? 'ðŸ”Š ON' : 'ðŸ”‡ OFF';
            toggleSoundBtn.className = `btn ${soundEnabled ? 'btn-success' : 'btn-secondary'}`;
        }
        
        updateSoundButton();
        volumeSlider.value = volume;
        
        // Event listeners
        toggleSoundBtn.addEventListener('click', () => {
            soundEnabled = !soundEnabled;
            localStorage.setItem('soundEnabled', soundEnabled);
            updateSoundButton();
            
            // Update sound manager
            if (window.soundManager) {
                window.soundManager.updateSettings();
                if (soundEnabled) {
                    window.soundManager.playSound('click');
                }
            }
        });
        
        volumeSlider.addEventListener('input', (e) => {
            volume = parseFloat(e.target.value);
            localStorage.setItem('soundVolume', volume);
            
            // Update sound manager
            if (window.soundManager) {
                window.soundManager.updateSettings();
                if (soundEnabled) {
                    window.soundManager.playSound('click');
                }
            }
        });
        
        testSoundsBtn.addEventListener('click', () => {
            if (window.soundManager && soundEnabled) {
                window.soundManager.playSound('click');
                setTimeout(() => window.soundManager.playSound('success'), 300);
                setTimeout(() => window.soundManager.playSound('win'), 600);
                setTimeout(() => window.soundManager.playSound('lose'), 1500);
            }
        });
    }
});
</script>
{% endblock %} 